{"class_fqid":"com-snaplogic-pipeline_9","snode_id":"5e3822a3db5f4c1c9e0886e1","instance_id":"05abf3d3-11aa-459d-9666-731e5c359069","instance_version":291,"link_map":{"link239":{"src_view_id":"output0","dst_view_id":"input0","src_id":"39be0919-01a0-41c4-97bd-33e69f5465da","dst_id":"441e7a3b-8706-4f43-940e-f81294d425a8","isGoto":false},"link245":{"src_view_id":"out","dst_view_id":"input0","src_id":"ee9458ce-a33c-407a-87d5-454c523eaefd","dst_id":"502ddd6f-f1e1-411a-9f6b-949e1c935824","isGoto":false},"link247":{"src_view_id":"output0","dst_view_id":"input0","src_id":"502ddd6f-f1e1-411a-9f6b-949e1c935824","dst_id":"bda83ba1-77cd-406c-9be7-5f01ab553a5e","isGoto":false},"link246":{"src_view_id":"output0","dst_view_id":"input0","src_id":"bda83ba1-77cd-406c-9be7-5f01ab553a5e","dst_id":"7a8ecb1d-b30a-4638-98d7-bd62f15f30e3","isGoto":false},"link201":{"src_view_id":"output0","dst_view_id":"input0","src_id":"7a8ecb1d-b30a-4638-98d7-bd62f15f30e3","dst_id":"39be0919-01a0-41c4-97bd-33e69f5465da","isGoto":false},"link240":{"src_view_id":"output0","dst_view_id":"input0","src_id":"441e7a3b-8706-4f43-940e-f81294d425a8","dst_id":"a837246e-b77a-4fa1-ba6b-91abed4a2aec","isGoto":false},"link148":{"src_view_id":"output0","dst_view_id":"input0","src_id":"a837246e-b77a-4fa1-ba6b-91abed4a2aec","dst_id":"06520cb9-d0bd-44b0-9e46-3aeb9f44e89a","isGoto":false}},"link_serial":248,"property_map":{"info":{"notes":{"value":null},"label":{"value":"task 7 child pipeline 2"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"author":{"value":"snaplogic.education1@interworks.com.mk"}},"input":{"ee9458ce-a33c-407a-87d5-454c523eaefd_in":{"label":{"value":"Directory Browser - Input view"},"view_type":{"value":"document"}}},"settings":{"imports":{"value":[]},"error_param_table":{"value":[]},"param_table":{"value":[]},"error_pipeline":{"expression":false,"value":null}},"error":{"error_behavior":{"value":"none"}},"output":{}},"render_map":{"pan_x_num":0,"default_snaplex":"5d89da2976832905c0b877e2","scale_ratio":1,"detail_map":{"bda83ba1-77cd-406c-9be7-5f01ab553a5e":{"grid_x_int":5,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"7a8ecb1d-b30a-4638-98d7-bd62f15f30e3":{"grid_x_int":6,"index":null,"recommendation_id":null,"source":"","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"06520cb9-d0bd-44b0-9e46-3aeb9f44e89a":{"grid_x_int":10,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"441e7a3b-8706-4f43-940e-f81294d425a8":{"grid_x_int":8,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"a837246e-b77a-4fa1-ba6b-91abed4a2aec":{"grid_x_int":9,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"502ddd6f-f1e1-411a-9f6b-949e1c935824":{"grid_x_int":4,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"ee9458ce-a33c-407a-87d5-454c523eaefd":{"grid_x_int":3,"index":null,"recommendation_id":null,"source":"snap catagory","grid_y_int":1,"rot_tail_int":0,"rot_int":0},"39be0919-01a0-41c4-97bd-33e69f5465da":{"grid_x_int":7,"index":null,"recommendation_id":null,"source":"","grid_y_int":1,"rot_tail_int":0,"output":{},"input":{},"rot_int":0}},"pan_y_num":0},"snap_map":{"bda83ba1-77cd-406c-9be7-5f01ab553a5e":{"class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc535","class_id":"com-snaplogic-snaps-transform-datatransform","class_version":4,"instance_fqid":"bda83ba1-77cd-406c-9be7-5f01ab553a5e_3","instance_id":"bda83ba1-77cd-406c-9be7-5f01ab553a5e","instance_version":3,"property_map":{"info":{"label":{"value":"Mapper2"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"execution_mode":{"value":"Validate & Execute"},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"jsonPath($, \"Name1[0]\")"},"targetPath":{"value":"$1"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_build_tag":"snapsmrc535"},"7a8ecb1d-b30a-4638-98d7-bd62f15f30e3":{"class_fqid":"com-snaplogic-snaps-rest-get_2-snapsmrc528","class_id":"com-snaplogic-snaps-rest-get","class_version":2,"instance_fqid":"7a8ecb1d-b30a-4638-98d7-bd62f15f30e3_28","instance_id":"7a8ecb1d-b30a-4638-98d7-bd62f15f30e3","instance_version":28,"property_map":{"info":{"notes":{"value":null},"label":{"value":"REST Get"}},"view_serial":100,"account":{"account_ref":{"expression":false,"value":{"label":{"expression":false,"value":"nov"},"ref_class_id":{"value":"com-snaplogic-snaps-rest-restbasicauthaccount"},"ref_id":{"expression":false,"value":"6d42465e-6cba-48ff-8147-944e1b2d3ef4"}}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":false},"execution_mode":{"value":"Validate & Execute"},"retry":{"value":5},"hasNext":{"expression":true,"value":null},"serviceUrl":{"expression":true,"value":"\"http://elastic.snaplogic.com/api/1/rest/public/runtime/Interworks-Partner/\"+$1+\"?level=summary\""},"processArray":{"value":false},"nextUrl":{"expression":true,"value":null},"showAllHeaders":{"value":false},"paginationInterval":{"value":0},"executeDuringPreview":{"value":true},"retryPolicy":{"value":"Connection errors"},"header":{"value":[{"headerKey":{"expression":false,"value":"Authentization Basic"},"headerValue":{"expression":false,"value":"c25hcGxvZ2ljLmVkdWNhdGlvbjFAaW50ZXJ3b3Jrcy5jb20ubWs6ekBuU3dyMDJOaW5fMjA="}}]},"responseEntityType":{"value":"DEFAULT"},"followRedirects":{"value":true},"timeout":{"value":900},"connTimeout":{"value":30},"queryParams":{"value":[]},"rawData":{"value":false}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}}},"class_build_tag":"snapsmrc528"},"06520cb9-d0bd-44b0-9e46-3aeb9f44e89a":{"class_fqid":"com-snaplogic-snaps-binary-write_3-snapsmrc535","class_id":"com-snaplogic-snaps-binary-write","class_version":3,"instance_fqid":"06520cb9-d0bd-44b0-9e46-3aeb9f44e89a_21","instance_id":"06520cb9-d0bd-44b0-9e46-3aeb9f44e89a","instance_version":21,"property_map":{"info":{"label":{"value":"File Writer"}},"view_serial":100,"account":{},"settings":{"retryInterval":{"expression":false,"value":1},"retries":{"expression":false,"value":0},"execution_mode":{"value":"Execute only"},"flushIntervalKb":{"value":-1},"writeHeader":{"value":false},"createDir":{"value":false},"executable_during_suggest":{"value":false},"filename":{"expression":true,"value":"\"PipelineInfo\" + pipe.parentRuuid +\".txt\""},"writeEmptyFile":{"value":false},"validate":{"value":false},"fileAction":{"value":"OVERWRITE"}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"binary"}}}},"class_build_tag":"snapsmrc535"},"441e7a3b-8706-4f43-940e-f81294d425a8":{"class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc535","class_id":"com-snaplogic-snaps-transform-datatransform","class_version":4,"instance_fqid":"441e7a3b-8706-4f43-940e-f81294d425a8_2","instance_id":"441e7a3b-8706-4f43-940e-f81294d425a8","instance_version":2,"property_map":{"info":{"label":{"value":"Mapper1"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":true},"execution_mode":{"value":"Validate & Execute"},"transformations":{"value":{"mappingTable":{"value":[{"targetPath":{"value":null},"expression":{"expression":true,"value":"$headers"}},{"targetPath":{"value":null},"expression":{"expression":true,"value":"$statusLine"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_build_tag":"snapsmrc535"},"a837246e-b77a-4fa1-ba6b-91abed4a2aec":{"class_fqid":"com-snaplogic-snaps-transform-csvformatter_3-snapsmrc535","class_id":"com-snaplogic-snaps-transform-csvformatter","class_version":3,"instance_fqid":"a837246e-b77a-4fa1-ba6b-91abed4a2aec_1","instance_id":"a837246e-b77a-4fa1-ba6b-91abed4a2aec","instance_version":1,"property_map":{"info":{"label":{"value":"CSV Formatter"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"execution_mode":{"value":"Validate & Execute"},"escapeChar":{"expression":false,"value":"\\"},"quoteMode":{"value":"ALL"},"quoteCharacter":{"expression":false,"value":"\""},"writeHeader":{"value":false},"charset":{"value":"UTF-8"},"ignoreEmptyStream":{"value":false},"writeBOM":{"value":false},"delimiter":{"expression":false,"value":","},"errorPolicy":{"value":"Default"},"newlineCharacter":{"value":"LF"},"useDefinedHeader":{"value":false},"outputHeader":{"value":[{"targetPath":{"value":null},"expression":{"expression":true,"value":null}}]}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"binary"}}}},"class_build_tag":"snapsmrc535"},"502ddd6f-f1e1-411a-9f6b-949e1c935824":{"class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc535","class_id":"com-snaplogic-snaps-transform-datatransform","class_version":4,"instance_fqid":"502ddd6f-f1e1-411a-9f6b-949e1c935824_4","instance_id":"502ddd6f-f1e1-411a-9f6b-949e1c935824","instance_version":4,"property_map":{"info":{"label":{"value":"Mapper1"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"execution_mode":{"value":"Validate & Execute"},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"$Name.split('.')"},"targetPath":{"value":"$Name1"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_build_tag":"snapsmrc535"},"ee9458ce-a33c-407a-87d5-454c523eaefd":{"class_fqid":"com-snaplogic-snaps-binary-directorybrowser_1-snapsmrc535","class_id":"com-snaplogic-snaps-binary-directorybrowser","class_version":1,"instance_fqid":"ee9458ce-a33c-407a-87d5-454c523eaefd_10","instance_id":"ee9458ce-a33c-407a-87d5-454c523eaefd","instance_version":10,"property_map":{"info":{"label":{"value":"Directory Browser"}},"view_serial":100,"account":{},"input":{"in":{"view_type":{"value":"document"},"label":{"value":"Input view"}}},"settings":{"retryInterval":{"expression":false,"value":1},"retries":{"expression":false,"value":0},"execution_mode":{"value":"Validate & Execute"},"s3SubfolderMetadataProp":{"value":true},"Filter":{"expression":true,"value":"pipe.parentRuuid+\".json\""},"Directory":{"expression":false,"value":"sldb:///"},"ignoreEmptyResult":{"value":true}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"out":{"view_type":{"value":"document"},"label":{"value":"Output view"}}}},"class_build_tag":"snapsmrc535"},"39be0919-01a0-41c4-97bd-33e69f5465da":{"class_fqid":"com-snaplogic-snaps-script-script_2-snapsmrc480","class_id":"com-snaplogic-snaps-script-script","class_version":2,"instance_fqid":"39be0919-01a0-41c4-97bd-33e69f5465da_1","instance_id":"39be0919-01a0-41c4-97bd-33e69f5465da","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Script"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"language":{"value":"Python"},"editable_content":{"value":"# Import the interface required by the Script snap.\nfrom com.snaplogic.scripting.language import ScriptHook\nimport java.util\n\ndef flatten(key,originalMap,attribName,outputMap):\n        \n        # flag = \"string\"\n        if isinstance(originalMap[key],java.util.ArrayList)  :\n            # flag = \"List\"\n            oldAttribName = attribName\n            childList = originalMap[key]\n            index = 0\n            # outputMap.put(oldAttribName+\".\"+str(index),\"List\")\n            for childElem in childList :\n                if childElem is not None:\n                    flatten(index,childList,oldAttribName+\".\"+str(index),outputMap)\n                index = index + 1\n            # outputMap.put(attribName,\"List\")\n        elif isinstance(originalMap[key],java.util.LinkedHashMap) :\n            oldAttribName = attribName\n            childMap = originalMap[key]\n            for childKey in childMap:\n                if childKey is not None:\n                    flatten(childKey,childMap,oldAttribName+\".\"+childKey,outputMap)\n            # outputMap.put(attribName,\"Dict\")\n        else:\n            outputMap.put(attribName,originalMap[key])\n        return outputMap \n\nclass TransformScript(ScriptHook):\n    def __init__(self, input, output, error, log):\n        self.input = input\n        self.output = output\n        self.error = error\n        self.log = log\n\n    # The \"execute()\" method is called once when the pipeline is started\n    # and allowed to process its inputs or just send data to its outputs.\n    def execute(self):\n        self.log.info(\"Executing Transform script\")\n        while self.input.hasNext():\n            try:\n                # Read the next document, wrap it in a map and write out the wrapper\n                in_doc = self.input.next()\n                # wrapper = java.util.HashMap()\n                outputMap = java.util.HashMap()\n                for key in in_doc:\n                    if key is not None :\n                        # str = flatten(key,in_doc,newKeyName,outputMap)\n                        flatten(key,in_doc,key,outputMap)\n                        # wrapper.put(item,str)\n                        # wrappper[item] = str\n                        # self.output.write(str)\n                self.output.write(outputMap)\n                # wrapper = java.util.HashMap()\n                # wrapper['original'] = in_doc\n\n                # self.output.write(in_doc)\n            except Exception as e:\n                errWrapper = {\n                    'errMsg' : str(e.args)\n                }\n                self.log.error(\"Error in python script\")\n                self.error.write(errWrapper)\n\n        self.log.info(\"Finished executing the Transform script\")\n        \n    \n\n# The Script Snap will look for a ScriptHook object in the \"hook\"\n# variable.  The snap will then call the hook's \"execute\" method.\nhook = TransformScript(input, output, error, log)"},"execution_mode":{"value":"Validate & Execute"},"executable_during_suggest":{"value":true},"script":{"expression":false,"value":null}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_build_tag":"snapsmrc480"}},"path_id":"/Interworks-Partner/IWEC/SL_IW_Edu_Igor_Perchakovski","path_snode":"5e2eb9cf3bd34e48855c4b1d","target_runtime":"standard"}